<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2>Admin Dashboard</h2>
    <a href="{{ url_for('logout') }}" class="btn btn-danger mb-3">Logout</a>

    <h4>All Users</h4>
     {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        <ul class="flashes">
                        {% for category, message in messages %}
                        <li class="{{ category }}">{{ message }}</li>
                        {% endfor %}
                        </ul>
                    {% endif %}
                    {% endwith %}
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th><th>Username</th><th>Email</th><th>Is Admin</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.username }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.is_admin }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h4>All Items</h4>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th><th>Name</th><th>Category</th><th>Description</th>
                <th>Location</th><th>Finder</th><th>Owner</th><th>Claimed</th><th>Image</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.item_name }}</td>
                <td>{{ item.category }}</td>
                <td>{{ item.description }}</td>
                <td>{{ item.location_found }}</td>
                <td>{{ item.finder.username }}</td>
                <td>{% if item.owner %}{{ item.owner.username }}{% endif %}</td>
                <td>{{ item.is_claimed }}</td>
                <td>
                    {% if item.image_filename %}
                    <img src="{{ url_for('static', filename='uploads/' + item.image_filename) }}" width="50">
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</body>
</html>
